{"ast":null,"code":"var _s = $RefreshSig$();\n/* global google */\nimport { useEffect, useRef } from 'react';\nimport { Loader } from '@googlemaps/js-api-loader';\nconst useGoogleMap = mapRef => {\n  _s();\n  const mapInstance = useRef(null);\n  const markerInstance = useRef(null);\n  useEffect(() => {\n    const loader = new Loader({\n      apiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n      version: 'weekly',\n      libraries: ['marker', 'places']\n    });\n    loader.load().then(async () => {\n      const {\n        Map\n      } = await window.google.maps;\n      const {\n        AdvancedMarkerElement\n      } = await google.maps.importLibrary('marker');\n      const melbourneCBD = {\n        lat: -37.8136,\n        lng: 144.9631\n      };\n      const map = new Map(mapRef.current, {\n        center: melbourneCBD,\n        zoom: 14,\n        mapId: 'feabc4fd011254f284cca2c8'\n      });\n      mapInstance.current = map;\n      map.addListener('click', event => {\n        if (markerInstance.current) {\n          markerInstance.current.position = event.latLng;\n        } else {\n          const newMarker = new AdvancedMarkerElement({\n            position: event.latLng,\n            map\n          });\n          markerInstance.current = newMarker;\n        }\n        console.log(\"marker pos:\" + markerInstance.current.position.lat, markerInstance.current.position.lng);\n        // 주변 시설 검색\n        const service = new google.maps.places.PlacesService(map);\n        service.nearbySearch({\n          location: event.latLng,\n          radius: 800,\n          // 도보 10분\n          type: ['restaurant', 'cafe', 'convenience_store']\n        }, (results, status) => {\n          if (status === google.maps.places.PlacesServiceStatus.OK) {\n            results.forEach(place => {\n              new google.maps.Marker({\n                position: place.geometry.location,\n                map,\n                title: place.name\n              });\n            });\n          } else {\n            console.warn(\"No nearby places found or error:\", status);\n          }\n        });\n      });\n    });\n  }, [mapRef]);\n};\n_s(useGoogleMap, \"BXXRfW4Lil/N+OK47IlwOHaSGhI=\");\nexport default useGoogleMap;","map":{"version":3,"names":["useEffect","useRef","Loader","useGoogleMap","mapRef","_s","mapInstance","markerInstance","loader","apiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","version","libraries","load","then","Map","window","google","maps","AdvancedMarkerElement","importLibrary","melbourneCBD","lat","lng","map","current","center","zoom","mapId","addListener","event","position","latLng","newMarker","console","log","service","places","PlacesService","nearbySearch","location","radius","type","results","status","PlacesServiceStatus","OK","forEach","place","Marker","geometry","title","name","warn"],"sources":["/Users/jungsooyoung/Documents/software modelling/Amenity-Scope/amenity-scope/src/hooks/useGoogleMap.js"],"sourcesContent":["/* global google */\nimport { useEffect, useRef } from 'react';\nimport { Loader } from '@googlemaps/js-api-loader';\n\nconst useGoogleMap = (mapRef) => {\n  const mapInstance = useRef(null);\n  const markerInstance = useRef(null);\n  \n\n  useEffect(() => {\n    const loader = new Loader({\n      apiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n      version: 'weekly',\n      libraries: ['marker', 'places'],\n    });\n\n    loader.load().then(async () => {\n      const { Map } = await window.google.maps;\n      const { AdvancedMarkerElement } = await google.maps.importLibrary('marker');\n\n      const melbourneCBD = { lat: -37.8136, lng: 144.9631 };\n\n      const map = new Map(mapRef.current, {\n        center: melbourneCBD,\n        zoom: 14,\n        mapId: 'feabc4fd011254f284cca2c8',\n      });\n\n      mapInstance.current = map;\n\n      map.addListener('click', (event) => {\n        if (markerInstance.current) {\n          markerInstance.current.position = event.latLng;\n        }\n        else {\n          const newMarker = new AdvancedMarkerElement({\n            position: event.latLng,\n            map,\n          });\n          markerInstance.current = newMarker;\n        }\n        console.log(\"marker pos:\" + markerInstance.current.position.lat,markerInstance.current.position.lng);\n        // 주변 시설 검색\n  const service = new google.maps.places.PlacesService(map);\n  service.nearbySearch({\n    location: event.latLng,\n    radius: 800, // 도보 10분\n    type: ['restaurant', 'cafe', 'convenience_store'],\n  }, (results, status) => {\n    if (status === google.maps.places.PlacesServiceStatus.OK) {\n      results.forEach((place) => {\n        new google.maps.Marker({\n          position: place.geometry.location,\n          map,\n          title: place.name,\n        });\n      });\n    } else {\n      console.warn(\"No nearby places found or error:\", status);\n    }\n  });\n      });\n    });\n  }, [mapRef]);\n};\n\nexport default useGoogleMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}